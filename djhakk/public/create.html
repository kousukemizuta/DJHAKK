<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‰ΩúÊàê - DJHAKK</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>
    <style>
        .container { padding-bottom: 100px; }
        .header { display: flex; align-items: center; gap: 16px; padding: 16px 0; margin-bottom: 24px; }
        .back-btn { background: none; border: none; color: var(--text); font-size: 16px; cursor: pointer; }
        .header-title { font-size: 20px; font-weight: 700; }
        .type-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 24px; }
        .type-btn { padding: 16px 8px; background: var(--card); border: 2px solid var(--border); border-radius: var(--r-lg); text-align: center; cursor: pointer; }
        .type-btn.active { border-color: var(--primary); background: rgba(255,107,0,0.1); }
        .type-btn-icon { font-size: 28px; margin-bottom: 8px; }
        .type-btn-label { font-size: 12px; font-weight: 600; }
        .type-btn-desc { font-size: 10px; color: var(--text2); margin-top: 4px; }
        .form-section { display: none; }
        .form-section.active { display: block; }
        .image-upload { width: 100%; aspect-ratio: 1; background: var(--card); border: 2px dashed var(--border); border-radius: var(--r-lg); display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; overflow: hidden; margin-bottom: 16px; }
        .image-upload img { width: 100%; height: 100%; object-fit: cover; }
        .image-upload-text { color: var(--text2); font-size: 14px; }
        .slots-container { margin-bottom: 16px; }
        .slot-item { background: var(--card); padding: 16px; border-radius: var(--r-md); margin-bottom: 12px; }
        .slot-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .slot-number { font-weight: 600; color: var(--primary); }
        .slot-remove { background: #FF4757; color: white; border: none; border-radius: 50%; width: 28px; height: 28px; cursor: pointer; }
        .slot-time-row { display: flex; gap: 8px; align-items: center; margin-bottom: 12px; }
        .slot-time-btn { flex: 1; padding: 12px; background: var(--surface); border: 1px solid var(--border); border-radius: 8px; color: var(--text); font-size: 16px; text-align: center; cursor: pointer; }
        .slot-time-btn:active { background: var(--card); }
        .slot-price-row { display: flex; gap: 8px; align-items: center; margin-bottom: 12px; }
        .slot-currency { padding: 12px 16px; background: var(--surface); border: 1px solid var(--border); border-radius: 8px; color: var(--primary); font-weight: 600; font-size: 14px; min-width: 60px; text-align: center; }
        .slot-price-input { flex: 1; padding: 12px 16px; background: var(--surface); border: 1px solid var(--border); border-radius: 8px; color: var(--text); font-size: 16px; text-align: right; }
        .slot-price-input:focus { outline: none; border-color: var(--primary); }
        .slot-price-display { font-size: 12px; color: var(--text2); text-align: right; margin-top: 4px; }
        .slot-capacity-row { display: flex; gap: 8px; align-items: center; }
        .slot-capacity-label { color: var(--text2); font-size: 14px; }
        .slot-capacity-select { padding: 10px 32px 10px 12px; background: var(--surface); border: 1px solid var(--border); border-radius: 8px; color: var(--text); font-size: 14px; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23A0A0B8' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 10px center; }
        .add-slot-btn { background: var(--surface); border: 1px dashed var(--border); color: var(--text2); width: 100%; padding: 12px; border-radius: var(--r-md); cursor: pointer; }
        .custom-region-input { display: none; margin-top: 8px; }
        .custom-region-input.active { display: block; }
        .currency-select-row { display: none; margin-top: 8px; }
        .currency-select-row.active { display: block; }
        .currency-info { display: flex; align-items: center; gap: 8px; padding: 12px; background: var(--surface); border-radius: 8px; margin-top: 8px; }
        .currency-info-text { font-size: 13px; color: var(--text2); }
        .currency-info-value { font-weight: 600; color: var(--primary); }
        .picker-modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 500; align-items: flex-end; justify-content: center; }
        .picker-modal.active { display: flex; }
        .picker-box { background: var(--surface); width: 100%; max-width: 600px; border-radius: 20px 20px 0 0; padding: 20px; }
        .picker-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .picker-title { font-size: 18px; font-weight: 600; }
        .picker-done { background: var(--gradient); color: white; border: none; padding: 8px 20px; border-radius: 20px; font-weight: 600; cursor: pointer; }
        .picker-cancel { background: none; border: none; color: var(--text2); font-size: 16px; cursor: pointer; }
        .picker-wheels { display: flex; justify-content: center; gap: 8px; height: 200px; }
        .picker-wheel { flex: 1; max-width: 80px; overflow-y: scroll; scroll-snap-type: y mandatory; -webkit-overflow-scrolling: touch; }
        .picker-wheel::-webkit-scrollbar { display: none; }
        .picker-item { height: 40px; display: flex; align-items: center; justify-content: center; scroll-snap-align: center; color: var(--text3); font-size: 20px; }
        .picker-item.selected { color: var(--text); font-weight: 600; }
        .picker-highlight { position: absolute; left: 50%; transform: translateX(-50%); width: calc(100% - 40px); max-width: 560px; height: 40px; top: 50%; margin-top: -20px; border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); pointer-events: none; }
        .picker-container { position: relative; }
        .audio-upload { width: 100%; padding: 20px; background: var(--card); border: 2px dashed var(--border); border-radius: var(--r-lg); display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; gap: 8px; }
        .audio-upload:hover { border-color: var(--primary); }
        .audio-upload-icon { font-size: 32px; }
        .audio-upload-text { color: var(--text2); font-size: 14px; }
        .audio-upload.uploaded { border-color: var(--primary); border-style: solid; }
        .price-error { color: #FF4757; font-size: 12px; margin-top: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="back-btn" onclick="history.back()">‚Üê Back</button>
            <span class="header-title">CREATE</span>
            <div id="headerProfileArea"></div>
        </div>
        
        <div class="type-grid">
            <div class="type-btn active" data-type="A" onclick="selectType('A', this)">
                <div class="type-btn-icon"></div>
                <div class="type-btn-label">TIMETABLE</div>
                <div class="type-btn-desc">Timetable sales</div>
            </div>
            <div class="type-btn" data-type="B" onclick="selectType('B', this)">
                <div class="type-btn-icon"></div>
                <div class="type-btn-label">GUARANTEE(ÔΩ∑ÔæûÔΩ¨Ôæó)</div>
                <div class="type-btn-desc">Pay guarantee</div>
            </div>
            <div class="type-btn" data-type="C" onclick="selectType('C', this)">
                <div class="type-btn-icon"></div>
                <div class="type-btn-label">FLYER</div>
                <div class="type-btn-desc">Information</div>
            </div>
            <div class="type-btn" data-type="audio" onclick="selectType('audio', this)">
                <div class="type-btn-icon"></div>
                <div class="type-btn-label">DOWNLOAD SALES</div>
                <div class="type-btn-desc">Download sales</div>
            </div>
            <div class="type-btn" data-type="goods" onclick="selectType('goods', this)">
                <div class="type-btn-icon"></div>
                <div class="type-btn-label">ITEM SALES</div>
                <div class="type-btn-desc">Item sales</div>
            </div>
            <div class="type-btn" data-type="produce" onclick="selectType('produce', this)">
                <div class="type-btn-icon"></div>
                <div class="type-btn-label">SELF PRODUCE</div>
                <div class="type-btn-desc">Self Produce</div>
            </div>
            <div class="type-btn" data-type="place" onclick="selectType('place', this)">
                <div class="type-btn-icon"></div>
                <div class="type-btn-label">PLACE</div>
                <div class="type-btn-desc">Venue/Club</div>
            </div>
            <div class="type-btn" data-type="agency" onclick="selectType('agency', this)">
                <div class="type-btn-icon"></div>
                <div class="type-btn-label">AGENCY</div>
                <div class="type-btn-desc">Agency/Management</div>
            </div>
            <div class="type-btn" data-type="shop" onclick="selectType('shop', this)">
                <div class="type-btn-icon"></div>
                <div class="type-btn-label">SHOP</div>
                <div class="type-btn-desc">Shop/Store</div>
            </div>
        </div>
        
        <!-- Event Form -->
        <div id="eventForm" class="form-section active">
            <div class="image-upload" onclick="document.getElementById('eventImage').click()">
                <img id="eventImagePreview" style="display:none;">
                <span class="image-upload-text" id="eventImageText">Upload image</span>
            </div>
            <input type="file" id="eventImage" accept="image/*" style="display:none;" onchange="previewImage(this,'eventImagePreview','eventImageText')">
            
            <div class="input-group"><label class="label">TITLE</label><input type="text" id="eventTitle" class="input" placeholder="event name"></div>
            <div class="input-group"><label class="label">DATE</label><input type="datetime-local" id="eventDate" class="input"></div>
            <div class="input-group"><label class="label">@</label><input type="text" id="eventLocation" class="input" placeholder="@"></div>
            <div class="input-group">
                <label class="label">AREA</label>
                <select id="eventRegion" class="input" onchange="handleRegionChange()">
                    <optgroup label="JAPAN">
                        <option value="TOKYO">TOKYO</option>
                        <option value="OSAKA">OSAKA</option>
                        <option value="NAGOYA">NAGOYA</option>
                        <option value="FUKUOKA">FUKUOKA</option>
                        <option value="OKINAWA">OKINAWA</option>
                    </optgroup>
                    <optgroup label="ASIA">
                        <option value="SEOUL">SEOUL</option>
                        <option value="SHANGHAI">SHANGHAI</option>
                        <option value="HONG KONG">HONG KONG</option>
                        <option value="BANGKOK">BANGKOK</option>
                        <option value="SINGAPORE">SINGAPORE</option>
                    </optgroup>
                    <optgroup label="NORTH AMERICA">
                        <option value="NEW YORK">NEW YORK</option>
                        <option value="LOS ANGELES">LOS ANGELES</option>
                        <option value="MIAMI">MIAMI</option>
                        <option value="CHICAGO">CHICAGO</option>
                        <option value="LAS VEGAS">LAS VEGAS</option>
                    </optgroup>
                    <optgroup label="EUROPE">
                        <option value="BERLIN">BERLIN</option>
                        <option value="LONDON">LONDON</option>
                        <option value="AMSTERDAM">AMSTERDAM</option>
                        <option value="IBIZA">IBIZA</option>
                        <option value="PARIS">PARIS</option>
                        <option value="BARCELONA">BARCELONA</option>
                    </optgroup>
                    <optgroup label="Other">
                        <option value="other">Other (Input)</option>
                    </optgroup>
                </select>
                <input type="text" id="customRegion" class="input custom-region-input" placeholder="Area name">
                <div id="currencySelectRow" class="currency-select-row">
                    <label class="label" style="margin-top:8px;">Currency</label>
                    <select id="customCurrency" class="input" onchange="handleCustomCurrencyChange()">
                        <option value="jpy">JPY - Japanese Yen (¬•)</option>
                        <option value="usd">USD - US Dollar ($)</option>
                        <option value="eur">EUR - Euro (‚Ç¨)</option>
                        <option value="gbp">GBP - British Pound (¬£)</option>
                        <option value="krw">KRW - Korean Won (‚Ç©)</option>
                        <option value="cny">CNY - Chinese Yuan (¬•)</option>
                        <option value="hkd">HKD - Hong Kong Dollar (HK$)</option>
                        <option value="thb">THB - Thai Baht (‡∏ø)</option>
                        <option value="sgd">SGD - Singapore Dollar (S$)</option>
                        <option value="twd">TWD - Taiwan Dollar (NT$)</option>
                    </select>
                </div>
                <div id="currencyInfo" class="currency-info">
                    <span class="currency-info-text">Currency: <span id="currencyDisplay" class="currency-info-value">JPY (¬•)</span></span>
                </div>
            </div>
            <div class="input-group"><label class="label">INFORMATION</label><textarea id="eventDesc" class="input" placeholder="Information"></textarea></div>
            
            <!-- „Çø„Ç§„É†„ÉÜ„Éº„Éñ„É´Áî®„Çπ„É≠„ÉÉ„Éà -->
            <div id="slotsSection" class="input-group">
                <label class="label">TIMETABLE</label>
                <div id="slotsContainer" class="slots-container"></div>
                <button type="button" class="add-slot-btn" onclick="addSlot()">+ Add</button>
            </div>
            
            <!-- „ÇÆ„É£„É©„É≥„ÉÜ„Ç£„ÉºÁî®„Çπ„É≠„ÉÉ„Éà -->
            <div id="gigSlotsSection" class="input-group" style="display:none;">
                <label class="label">GUARANTEE(ÔΩ∑ÔæûÔΩ¨Ôæó)</label>
                <div id="gigSlotsContainer" class="slots-container"></div>
                <button type="button" class="add-slot-btn" onclick="addGigSlot()">+ Add</button>
            </div>
            
            <button class="btn btn-p btn-lg" onclick="submitEvent()">Create</button>
        </div>
        
        <!-- Production Form -->
        <div id="productionForm" class="form-section">
            <div class="image-upload" onclick="document.getElementById('prodImage').click()">
                <img id="prodImagePreview" style="display:none;">
                <span class="image-upload-text" id="prodImageText">Upload image</span>
            </div>
            <input type="file" id="prodImage" accept="image/*" style="display:none;" onchange="previewImage(this,'prodImagePreview','prodImageText')">
            
            <!-- Èü≥Ê∫ê„Ç¢„ÉÉ„Éó„É≠„Éº„ÉâÔºàDOWNLOAD SALESÂ∞ÇÁî®Ôºâ -->
            <div id="audioUploadSection" class="input-group" style="display:none;">
                <label class="label">AUDIO FILE</label>
                <div class="audio-upload" onclick="document.getElementById('prodAudio').click()">
                    <span class="audio-upload-icon">üéµ</span>
                    <span class="audio-upload-text" id="prodAudioText">Upload audio (mp3/wav)</span>
                </div>
                <input type="file" id="prodAudio" accept="audio/mp3,audio/mpeg,audio/wav" style="display:none;" onchange="previewAudio(this)">
                <div id="audioPreviewContainer" style="display:none;">
                    <audio id="audioPreview" controls style="width:100%;margin-top:8px;"></audio>
                    <div id="audioDurationDisplay" style="font-size:12px;color:var(--text2);margin-top:4px;"></div>
                </div>
            </div>
            
            <div class="input-group"><label class="label">TITLE</label><input type="text" id="prodTitle" class="input" placeholder="Product name"></div>
            <div class="input-group">
                <label class="label">Price (JPY)</label>
                <input type="number" id="prodPrice" class="input" placeholder="0 or 50+" min="0" onchange="validatePrice(this)">
                <div id="prodPriceError" class="price-error" style="display:none;"></div>
            </div>
            <div class="input-group"><label class="label">INFORMATION</label><textarea id="prodDesc" class="input" placeholder="Information"></textarea></div>
            
            <button class="btn btn-p btn-lg" onclick="submitProduction()">Create</button>
        </div>
        
        <!-- Place Form -->
        <div id="placeForm" class="form-section">
            <div class="image-upload" onclick="document.getElementById('placeImage').click()">
                <img id="placeImagePreview" style="display:none;">
                <span class="image-upload-text" id="placeImageText">Upload image</span>
            </div>
            <input type="file" id="placeImage" accept="image/*" style="display:none;" onchange="previewImage(this,'placeImagePreview','placeImageText')">
            
            <div class="input-group"><label class="label">NAME</label><input type="text" id="placeName" class="input" placeholder="Place name"></div>
            <div class="input-group"><label class="label">@</label><input type="text" id="placeLocation" class="input" placeholder="Address / Access"></div>
            <div class="input-group">
                <label class="label">AREA</label>
                <select id="placeRegion" class="input">
                    <optgroup label="JAPAN">
                        <option value="TOKYO">TOKYO</option>
                        <option value="OSAKA">OSAKA</option>
                        <option value="NAGOYA">NAGOYA</option>
                        <option value="FUKUOKA">FUKUOKA</option>
                        <option value="OKINAWA">OKINAWA</option>
                    </optgroup>
                    <optgroup label="ASIA">
                        <option value="SEOUL">SEOUL</option>
                        <option value="SHANGHAI">SHANGHAI</option>
                        <option value="HONG KONG">HONG KONG</option>
                        <option value="BANGKOK">BANGKOK</option>
                        <option value="SINGAPORE">SINGAPORE</option>
                    </optgroup>
                    <optgroup label="NORTH AMERICA">
                        <option value="NEW YORK">NEW YORK</option>
                        <option value="LOS ANGELES">LOS ANGELES</option>
                        <option value="MIAMI">MIAMI</option>
                        <option value="CHICAGO">CHICAGO</option>
                        <option value="LAS VEGAS">LAS VEGAS</option>
                    </optgroup>
                    <optgroup label="EUROPE">
                        <option value="BERLIN">BERLIN</option>
                        <option value="LONDON">LONDON</option>
                        <option value="AMSTERDAM">AMSTERDAM</option>
                        <option value="IBIZA">IBIZA</option>
                        <option value="PARIS">PARIS</option>
                        <option value="BARCELONA">BARCELONA</option>
                    </optgroup>
                </select>
            </div>
            <div class="input-group">
                <label class="label">SNS LINK</label>
                <div id="placeSnsContainer"></div>
                <button type="button" class="add-slot-btn" onclick="addPlaceSnsLink()">+ Add SNS</button>
            </div>
            <div class="input-group"><label class="label">HP</label><input type="url" id="placeUrl" class="input" placeholder="https://example.com"></div>
            <div class="input-group"><label class="label">INFORMATION</label><textarea id="placeDesc" class="input" placeholder="Information"></textarea></div>
            
            <button class="btn btn-p btn-lg" onclick="submitPlace()">Create</button>
        </div>
    </div>
    
    <!-- „Éâ„É©„É†„Éî„ÉÉ„Ç´„Éº„É¢„Éº„ÉÄ„É´ -->
    <div class="picker-modal" id="pickerModal">
        <div class="picker-box">
            <div class="picker-header">
                <button class="picker-cancel" onclick="closePicker()">Cancel</button>
                <span class="picker-title" id="pickerTitle">Start Time</span>
                <button class="picker-done" onclick="confirmPicker()">Done</button>
            </div>
            <div class="picker-container">
                <div class="picker-highlight"></div>
                <div class="picker-wheels">
                    <div class="picker-wheel" id="hourWheel"></div>
                    <div style="display:flex;align-items:center;font-size:24px;color:var(--text);">:</div>
                    <div class="picker-wheel" id="minuteWheel"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Floating Action Button -->
    <button class="fab" style="background: var(--primary);">+</button>
    
    <nav class="nav">
        <div class="nav-item" onclick="location.href='index.html?tab=home'"><span>Home</span></div>
        <div class="nav-item" onclick="location.href='events.html'"><span>Event</span></div>
        <div class="nav-item" onclick="location.href='timeline.html'"><span>TimeLine</span></div>
        <div class="nav-item" onclick="location.href='productions.html'"><span>Production</span></div>
        <div class="nav-item" onclick="location.href='place.html'"><span>Place</span></div>
    </nav>
    <div class="toast" id="toast"></div>
    
    <!-- Common JS -->
    <script defer src="js/config.js"></script>
    <script defer src="js/firebase-init.js"></script>
    <script defer src="js/ui.js"></script>
    <script defer src="js/auth.js"></script>
    <script defer src="js/data.js"></script>
    <script defer src="js/interactions.js"></script>
    <!-- Page JS -->
    <script defer src="js/pages/create.js"></script>
    <script defer src="js/lazy-load.js"></script>
</body>
</html>
